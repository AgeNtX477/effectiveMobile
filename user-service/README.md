# Документация API

## Установка и настройка

Для установки и настройки данного API выполните следующие шаги:

1. **Клонирование репозитория**:
   Скачайте проект с Githab:

2. **Установка необходимых инструментов**:
   Убедитесь, что у вас установлены следующие инструменты:
   - **Node.js**: [Скачать и установить Node.js](https://nodejs.org/)
   - **NestJS**: Установите NestJS CLI глобально:

   ```bash
   npm install -g @nestjs/cli
   ```

   - **PostgreSQL**: Установите PostgreSQL на вашу систему. Инструкции можно найти на [официальном сайте PostgreSQL](https://www.postgresql.org/download/).

3. **Установка зависимостей**:
   Установите все зависимости проекта:

   ```bash
   npm install
   ```

4. **Создание базы данных**:
   Создайте базу данных с именем `userservice` в PostgreSQL. Вы можете сделать это через командную строку psql или с помощью графического интерфейса, такого как pgAdmin:

   ```sql
   CREATE DATABASE "userservice";
   ```

5. **Настройка конфигурации подключения к базе данных**:
   В файле `ormconfig.ts` укажите данные для подключения к вашей базе данных:

   ```typescript
   const AppDataSource = new DataSource({
       type: 'postgres',
       host: '127.0.0.1',
       port: 5432,
       username: 'your_user',
       password: 'your_password',
       database: 'userservice',
       entities: [User],
       synchronize: true,
   });
   ```

6. **Настройка количества пользователей в seed.js**:
   В файле `seed.ts` укажите количество пользователей, которые вы хотите создать. Например, если вы хотите создать 1 миллион пользователей, убедитесь, что цикл в `seed.ts` настроен на это:

   ```typescript
    const userCount = 500;
   ```

7. **Запуск проекта**:
   После настройки подключения к базе данных и установки всех зависимостей запустите проект:

   ```bash
   npm run start:dev
   ```

   Затем выполните файл:
   ```bash
   node dist/seed.js
   ```

## Использование API

После успешного выполнения всех шагов API готово к использованию. 

### Доступный endpoint:

- **POST** `/users/reset-problems`
  - **Описание**: Эта конечная точка сбрасывает флаг `hasProblems` для всех пользователей, у которых он установлен в `true`. Возвращает количество пользователей, чей флаг был изменен.
  
## Пример запроса
```http
POST /users/reset-problems
```

#### Пример ответа

- **Код состояния**: `200 OK`
- **Тело**:
```
json
{
"message": "X пользователям состояние проблемы изменено с true на false"
}
```

### Заключение

**Конец :)**

